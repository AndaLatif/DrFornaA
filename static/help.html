<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DrForna</title>
    <link rel="stylesheet" href="main.css" />
    <link rel="shortcut icon" href="#" />
</head>
<body id="helptot"> 
    <div id="title">How to use DrForna</div>
    <div class="main_container">
        <div >
            <h3>Main input format (DrForna files):</h3>
       
            The <em>DrFrona input file </em>should be a white-space separated value (``csv-like'') file.
            The header should have the form <em>id time occupancy structure energy</em>. 
            <ul> 
                <li><em>id</em> groups structures that differ
                    only in the number of unpaired nucleotides at the
                    end. <br>(This grouping is recommended for a better
                    performance, but not mandatory. Alternatively, every
                    structure can have a unique ID, which will not change
                    in the visual output, or the same ID can be used for 
                    structures with different base-pairs. However, the latter
                    may lead to unexpected visualization, as the colors
                    in the time point selection panel are defined by first structure
                    for each ID.)</li>
                <li><em>time</em> denotes the time point at which structures are plotted in the ensemble visualization area.</li>
                <li><em>occupancy</em> is the probability of observing the structure in
                    the ensemble at the given time point. <br>(This affects the size of a 
                    structure plot in the ensemble visualization area.)</li>
                <li><em>structure</em> is the structure in dot-bracket notation. <br>(Pseudoknots 
                    are denoted by different sets of parenthesis, or pairs of lowercase/uppercase letters.) </li>
                <li><em>energy</em> is the free energy of the structure. <br>(The value in this field is not used for visualization.)</li>
            </ul>
           
        <div class="example_container">
            <h4>Example input file:</h4>
            <p>id time occupancy structure energy</p>
            <p>6 1.47 1.0000 .((((....((((....))))....))))........  -9.30</p>
            <p>6 1.48 1.0000 .((((....((((....))))....))))........  -9.30</p>
            <p> 9 1.49 0.1494 .........((((....))))....((((....)))). -10.00</p>
            <p> 6 1.49 0.8506 .((((....((((....))))....)))).........  -9.30</p>
            <p> 9 1.50 0.2693 .........((((....))))....((((....)))). -10.00</p>
            <p> 6 1.50 0.7306 .((((....((((....))))....)))).........  -9.30</p>
            <p> 9 1.51 0.3656 .........((((....))))....((((....)))). -10.00</p>
            <p> 6 1.51 0.6344 .((((....((((....))))....)))).........  -9.30</p>
        </div>
        <p>
            The parameter  <em>min-occupancy</em> filters lines from the input
            file if the occupancy is too low. Note that setting this threshold
            too low may crash the browser, while a high threshold can delete
            entire time points for visualization. 
            </p>
            <h3>Sequence input format (fasta files, optional):</h3>
            <div>
                <ul> 
                    <li>The <em>sequence</em> is optional and can be either uploaded using a fasta file or written in the provided text box. 
                        Lines starting with the symbol ">" are ignored. <br>
                        Note: Providing a sequence may cause the colors of nucleotides be perceived darker than in the time point selection panel.
                    </li>
                </ul> 
            </div>
        </div>
    </div>
    <div class="main_container">
        <div class="right_container">            
            The visual output contains three parts:
            <ol>
                <li>The ensemble visualization area (treemap)</li>
                <p>The output shown contains the visual output for a selected
                time point (marked with a vertical red line on the time point
                selection panel below):
                </p>
                <ul>
                    <li>Each rectangle shows a structure together with its ID in the top left corner.</li>
                    <li>The size of a rectangle is proportional to the occupancy of the corresponding structure.</li>
                    <li>Nucleotides in common helices are shown in the same color, unpaired nucleotides remain uncolored.</li>
                </ul>
                <p>Move the mouse over a rectangle to display the occupancy of the corresponding structure.</p>
                <p>Click rectangles to zoom in on a structure. A second click zooms out again.</p>

                <li>The time point selection panel</li>
                <ul>
                    <li>The vertical black line on the time scale marks the end
                        of transcription, and also a transition from a linear
                        time scale to a logarithmic scale.</li>
                    <li>For each time point, the vertical section of the colors
                        shown on the scale correspond to the nucleotide colors
                        of the most occupied structure present at the selected
                    time point.</li>
                    <li>A mouse click on the time scale freezes the visualization at a specific time point. A
                        second click makes the time point selection panel responsive to mouse over events again.
                        </li>

                    <li>The Play/Pause button in the top control panel starts an animation,
                    which can also be deactivated by a mouse click on the scale area.
                </li>
                </ul>
                <li>The summary table</li>
                <ul>
                    <li>A summary of the input file for the selected time point can be seen in the summary table. 
                        The dot bracket notation is colored to match the color scheme of helices in the main visualization area.
                </li><img style="width:100%" , alt="Treemap " src="./table.png">
                </ul>
            </ol>

        </div>
        <div class="left_container">
            <img style="width:90%" , alt="Treemap " src="./anot.svg">
        </div>
    </div>
    
    <a href=index.html> Back to DrForna</a></div>
</body>
</html>